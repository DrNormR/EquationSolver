<Window x:Class="EquationSolver.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Equation Solver" Height="700" Width="1100"
        Background="#F5F5F5"
        WindowState="Maximized">
    
    <Window.Resources>
        <Style x:Key="MathButtonStyle" TargetType="Button">
            <Setter Property="Margin" Value="2"/>
            <Setter Property="Padding" Value="4"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontFamily" Value="Cambria Math"/>
            <Setter Property="Background" Value="#ECF0F1"/>
            <Setter Property="BorderBrush" Value="#BDC3C7"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}" 
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="4">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#D5DBDB"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#BDC3C7"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0" Text="Step-by-Step Equation Solver" 
                   FontSize="24" FontWeight="Bold" Margin="0,0,0,20"
                   Foreground="#2C3E50"/>

        <!-- Input Section -->
        <Border Grid.Row="1" Background="White" CornerRadius="8" 
                BorderBrush="#BDC3C7" BorderThickness="1" Padding="15" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Enter your equation:" FontSize="14" Margin="0,0,0,5" Foreground="#34495E"/>
                <TextBlock Text="Use the buttons below or type directly. Examples: 2*x + 5 = 13  |  x^2 - 4 = 0  |  sqrt(x) = 4  |  (1/2)*x + 3 = 7" 
                          FontSize="11" Foreground="#7F8C8D" Margin="0,0,0,10"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBox x:Name="EquationInput" Grid.Column="0"
                             FontSize="18" Padding="12" Height="60"
                             VerticalContentAlignment="Top"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             VerticalScrollBarVisibility="Auto"
                             BorderBrush="#3498DB" BorderThickness="2"
                             FontFamily="Cambria Math"/>

                    <Button x:Name="SolveButton" Grid.Column="1"
                            Content="Solve" Click="SolveButton_Click"
                            FontSize="16" Padding="20,8" Height="60"
                            Background="#3498DB" Foreground="White"
                            BorderThickness="0" Margin="10,0,0,0"
                            Cursor="Hand"
                            VerticalAlignment="Top">
                        <Button.Style>
                            <Style TargetType="Button">
                                <Setter Property="Background" Value="#3498DB"/>
                                <Style.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#2980B9"/>
                                    </Trigger>
                                </Style.Triggers>
                            </Style>
                        </Button.Style>
                    </Button>
                </Grid>
            </StackPanel>
        </Border>

        <!-- Mathematical Input Panel -->
        <Border Grid.Row="2" Background="White" CornerRadius="8" 
                BorderBrush="#BDC3C7" BorderThickness="1" Padding="15" Margin="0,0,0,15">
            <StackPanel>
                <TextBlock Text="Mathematical Symbols:" FontSize="14" Margin="0,0,0,10" Foreground="#34495E"/>
                
                <!-- Row 1: Powers and Roots -->
                <UniformGrid Rows="1" Columns="12" Margin="0,0,0,8">
                    <Button Content="x²" Tag="^2" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Square"/>
                    <Button Content="xⁿ" Tag="^" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Power"/>
                    <Button Content="log₂" Tag="log(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Logarithm"/>
                    <Button Content="√" Tag="sqrt(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Square root"/>
                    <Button Content="ⁿ√" Tag="nroot(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Nth root"/>
                    <Button Content="≤" Tag="&lt;=" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Less than or equal"/>
                    <Button Content="≥" Tag=">=" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Greater than or equal"/>
                    <Button Content="≡" Tag="=" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Equals"/>
                    <Button Content="=" Tag="=" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Equals"/>
                    <Button Content="x⁻¹" Tag="^(-1)" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Inverse"/>
                    <Button Content="π" Tag="pi" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Pi"/>
                    <Button Content="⌫" Tag="backspace" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Backspace"/>
                </UniformGrid>

                <!-- Row 2: Functions and Operations -->
                <UniformGrid Rows="1" Columns="12" Margin="0,0,0,8">
                    <Button Content="( )" Tag="(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Parentheses"/>
                    <Button Content="x/y" Tag="/" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Fraction"/>
                    <Button Content="%" Tag="%" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Percent"/>
                    <Button Content="∫" Tag="integrate(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Integral"/>
                    <Button Content="∫ₐᵇ" Tag="integrate(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Definite integral"/>
                    <Button Content="lim" Tag="limit(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Limit"/>
                    <Button Content="Σ" Tag="sum(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Sum"/>
                    <Button Content="∞" Tag="infinity" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Infinity"/>
                    <Button Content="θ" Tag="theta" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Theta"/>
                    <Button Content="f∘g" Tag="compose(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Function composition"/>
                    <Button Content="f(x)" Tag="f(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Function"/>
                    <Button Content="C" Tag="clear" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Clear"/>
                </UniformGrid>

                <!-- Row 3: Trigonometric Functions -->
                <UniformGrid Rows="1" Columns="12" Margin="0,0,0,8">
                    <Button Content="sin" Tag="sin(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Sine"/>
                    <Button Content="cos" Tag="cos(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Cosine"/>
                    <Button Content="tan" Tag="tan(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Tangent"/>
                    <Button Content="asin" Tag="asin(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Arcsine"/>
                    <Button Content="acos" Tag="acos(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Arccosine"/>
                    <Button Content="atan" Tag="atan(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Arctangent"/>
                    <Button Content="ln" Tag="ln(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Natural logarithm"/>
                    <Button Content="log" Tag="log(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Logarithm"/>
                    <Button Content="e" Tag="e" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Euler's number"/>
                    <Button Content="eˣ" Tag="exp(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Exponential"/>
                    <Button Content="!" Tag="!" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Factorial"/>
                    <Button Content="±" Tag="+-" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Plus minus"/>
                </UniformGrid>

                <!-- Row 4: Numbers and Basic Operations -->
                <UniformGrid Rows="1" Columns="12" Margin="0,0,0,0">
                    <Button Content="7" Tag="7" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="8" Tag="8" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="9" Tag="9" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="+" Tag="+" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="4" Tag="4" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="5" Tag="5" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="6" Tag="6" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="-" Tag="-" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="1" Tag="1" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="2" Tag="2" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="3" Tag="3" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="*" Tag="*" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                </UniformGrid>
                
                <!-- Row 5: Variables and More Operations -->
                <UniformGrid Rows="1" Columns="12" Margin="0,8,0,0">
                    <Button Content="0" Tag="0" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="." Tag="." Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="x" Tag="x" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="/" Tag="/" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="y" Tag="y" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="z" Tag="z" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="(" Tag="(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content=")" Tag=")" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                    <Button Content="|x|" Tag="abs(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Absolute value"/>
                    <Button Content="⌊x⌋" Tag="floor(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Floor"/>
                    <Button Content="⌈x⌉" Tag="ceil(" Click="MathButton_Click" Style="{StaticResource MathButtonStyle}" ToolTip="Ceiling"/>
                    <Button Content="Space" Tag=" " Click="MathButton_Click" Style="{StaticResource MathButtonStyle}"/>
                </UniformGrid>
            </StackPanel>
        </Border>

        <!-- Parsed Equation Display -->
        <Border Grid.Row="3" x:Name="ParsedEquationBorder" 
                Background="White" CornerRadius="8" 
                BorderBrush="#BDC3C7" BorderThickness="1" 
                Padding="15" Margin="0,0,0,15"
                Visibility="Collapsed">
            <StackPanel>
                <TextBlock Text="Parsed Equation:" FontSize="12" Foreground="#7F8C8D" Margin="0,0,0,5"/>
                <TextBlock x:Name="ParsedEquationText" FontSize="18" 
                          FontFamily="Cambria Math" Foreground="#2C3E50"/>
            </StackPanel>
        </Border>

        <!-- Solution Steps -->
        <Border Grid.Row="4" Background="White" CornerRadius="8" 
                BorderBrush="#BDC3C7" BorderThickness="1" Padding="15">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel x:Name="StepsPanel">
                    <TextBlock Text="Solution steps will appear here..." 
                              FontSize="14" Foreground="#95A5A6" 
                              HorizontalAlignment="Center" 
                              VerticalAlignment="Center"
                              Margin="0,50,0,0"/>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>